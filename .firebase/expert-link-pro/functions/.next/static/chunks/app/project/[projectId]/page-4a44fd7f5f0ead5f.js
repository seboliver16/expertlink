(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{3989:function(e,t,s){Promise.resolve().then(s.bind(s,9919))},8826:function(e,t,s){"use strict";s.d(t,{UserProvider:function(){return d},a:function(){return x}});var r=s(7437),l=s(2265),a=s(5186),n=s(9842);class i{addProject(e,t){this.projects.set(e,t)}useCredit(){if(this.credits>0)this.credits-=1;else throw Error("Not enough credits")}addCredit(e){this.credits+=e}constructor(e,t,s,r=new Map,l=0){this.id=e,this.name=t,this.email=s,this.projects=r||new Map,this.credits=l}}var o=s(8634);let c=(0,l.createContext)(void 0),d=e=>{let{children:t}=e,[s,d]=(0,l.useState)(null),[x,u]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{let e=(0,a.v0)(),t=(0,a.Aj)(e,async e=>{if(e){let t=e.uid,s=e.email||"",r=(0,n.JU)(o.db,"users",t),l=await (0,n.QT)(r);if(l.exists()){let e=l.data();d(new i(t,e.name,s,new Map(e.projects),e.credits))}else{let e=new i(t,"",s);await (0,n.pl)(r,{name:e.name,email:e.email,projects:{},credits:e.credits}),d(e)}}else d(null);u(!1)});return()=>t()},[]),x)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-white",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-blue-500"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"Loading user data..."})]})}):(0,r.jsx)(c.Provider,{value:{user:s,setUser:d},children:t})},x=()=>{let e=(0,l.useContext)(c);if(!e)throw Error("useUser must be used within a UserProvider");return e}},8634:function(e,t,s){"use strict";s.d(t,{I:function(){return o},db:function(){return i}});var r=s(5236),l=s(9842),a=s(5186);let n=(0,r.ZF)({apiKey:"AIzaSyA14LUJlrrF9qjTs_sdSKWoxcr4Nbmo4Yk",authDomain:"expert-link-pro.firebaseapp.com",projectId:"expert-link-pro",storageBucket:"expert-link-pro.appspot.com",messagingSenderId:"936590460150",appId:"1:936590460150:web:b376036b84b0a689db18d7",measurementId:"G-YL2DDQBBTG"}),i=(0,l.ad)(n),o=(0,a.v0)(n)},9919:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var r=s(7437),l=s(2265),a=s(6463),n=s(9842),i=s(8634),o=s(8826),c=s(1504),d=e=>{let{collapsed:t,projectId:s,onSearch:a}=e,[n,i]=(0,l.useState)(""),o=async()=>{n.trim()&&(await a(n),i(""))},c=async e=>{"Enter"===e.key&&await o()};return(0,r.jsx)("div",{className:"fixed bottom-0 bg-white transition-all duration-300 z-50",style:{left:t?"80px":"240px",right:"0px",paddingBottom:"16px"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-8 max-w-full mx-auto rounded-full",style:{padding:"8px 16px",backgroundColor:"white",width:"70%",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Type your search...",value:n,onChange:e=>i(e.target.value),onKeyPress:c,className:"flex-grow rounded-full border border-transparent focus:outline-none focus:ring-0",style:{paddingLeft:"16px"}}),(0,r.jsx)("button",{onClick:o,className:"py-2 px-4 rounded-full transition ".concat(n.trim()?"bg-blue-500 text-white":"bg-gray-200 text-gray-400"),style:{padding:"0 12px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},disabled:!n.trim(),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})})},x=e=>{let{children:t,onClose:s,title:l}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center p-4 justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 border-b",children:[l&&(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:l}),(0,r.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,r.jsx)("div",{className:"p-4",children:t})]})})},u=s(6920),p=s(4478),m=s(499),h=s(5079),g=e=>{let{onClose:t,onSend:s,selectedExperts:a,projectId:c}=e,{user:d}=(0,o.a)(),[x,u]=(0,l.useState)(""),[p,m]=(0,l.useState)(Array(10).fill("")),[h,g]=(0,l.useState)(!0),[j,b]=(0,l.useState)({});if((0,l.useEffect)(()=>{let e=async()=>{if(a.length>0)try{let e={};for(let t of a){let s=(0,n.JU)(i.db,"experts",t),r=await (0,n.QT)(s);r.exists()&&(e[t]=r.data())}b(e)}catch(e){console.error("Error fetching experts data:",e)}};(async()=>{if(d&&c)try{let e=(0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(c)),t=await (0,n.QT)(e);if(t.exists()){let e=t.data();u((null==e?void 0:e.description)||""),m(t=>(null==e?void 0:e.questions)?[...e.questions,...t.slice(e.questions.length)]:t)}}catch(e){console.error("Error fetching project data:",e)}finally{g(!1)}})(),e()},[d,c,a]),!d)return null;let f=e=>e.replace(/\s+/g,"").length>=5,y=(e,t)=>{m(s=>{let r=[...s];return r[e]=t.slice(0,200),r})},v=async()=>{try{console.log("Updating project questions..."),p.filter(e=>e.trim().length>0);let e=(0,n.qs)(i.db);a.forEach(t=>{let s=j[t];console.log("Preparing to write Firestore document for expert: ".concat(s.name,", email: ").concat(s.email));let r={expertName:s.name,expertEmail:s.email,projectName:"Project Name",projectDescription:"Project description"},l=(0,n.JU)(i.db,"emails",t);e.set(l,r)}),await e.commit(),console.log("Emails written to Firestore successfully"),alert("Emails written to Firestore successfully! The Cloud Function will handle the sending."),s(a)}catch(e){console.error("Error writing emails to Firestore or updating questions:",e),alert("Error writing emails to Firestore or updating questions")}};return(0,r.jsxs)("div",{className:"fixed inset-0 flex overflow-hidden z-10",children:[(0,r.jsxs)("div",{className:"w-1/2 p-8 bg-white shadow-lg flex flex-col",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Project Details"}),h?(0,r.jsx)("p",{className:"text-gray-700",children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Project Description"}),(0,r.jsx)("p",{className:"text-gray-700",children:x})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Experts Being Contacted"}),(0,r.jsx)("ul",{className:"space-y-4",children:a.map((e,t)=>{let s=j[e];return(0,r.jsxs)("li",{className:"bg-white bg-opacity-20 backdrop-blur-md border border-gray-300 p-4 rounded-lg shadow-md",children:[(0,r.jsx)("p",{className:"font-bold text-gray-900",children:(null==s?void 0:s.name)||"Expert Name"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(null==s?void 0:s.title)||"Title"}),(null==s?void 0:s.email)?(0,r.jsx)("a",{href:"mailto:".concat(s.email),className:"text-blue-600 hover:underline",children:s.email}):(null==s?void 0:s.linkedinUrl)?(0,r.jsx)("a",{href:s.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"LinkedIn Profile"}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No contact info available"})]},t)})})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex space-x-4",children:[(0,r.jsx)("button",{onClick:t,className:"bg-gray-500 text-white py-3 px-20 rounded-lg hover:bg-gray-600 transition",children:"Cancel"}),(0,r.jsx)("button",{onClick:v,className:"bg-blue-500 text-white py-3 px-20 rounded-lg hover:bg-blue-600 transition",children:"Send Email"})]})]}),(0,r.jsxs)("div",{className:"w-1/2 p-8 bg-gray-50 overflow-auto",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Qualifying Questions"}),(0,r.jsx)("div",{className:"space-y-4",children:p.map((e,t)=>(0,r.jsx)("input",{type:"text",value:e,onChange:e=>y(t,e.target.value),placeholder:"#".concat(t+1," Qualifying Question (optional)"),className:"block w-full border-2 rounded-lg p-3 text-lg",maxLength:200,disabled:t>0&&!f(p[t-1])},t))})]})]})},j=e=>{let{categories:t,setCategories:s,addedExperts:o,setAddedExperts:c,user:d,projectId:x}=e,[p,m]=(0,l.useState)({}),[j,b]=(0,l.useState)(new Set),[f,y]=(0,l.useState)({}),[v,N]=(0,l.useState)(""),[w,k]=(0,l.useState)(t[0]||"General"),[C,E]=(0,l.useState)(!1);(0,a.useRouter)();let P=(e,t)=>{let s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(let r of s)if(e[r]!==t[r])return!1;return!0};(0,l.useEffect)(()=>{(async()=>{if(Object.keys(o).length>0){let e={};for(let t of Object.keys(o))if(!p[t]){let s=(0,n.JU)(i.db,"experts",t),r=await (0,n.QT)(s);r.exists()&&(e[t]=r.data())}Object.keys(e).length>0&&m(t=>({...t,...e}))}})();let e=(0,n.cf)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),e=>{if(e.exists()){let r=e.data();if(P(r.experts||{},o)||c(r.experts||{}),!P(r.categories||{},t)){let e=r.categories||[];s(e),e.includes(w)||k(e[0]||"General")}r.contactedExperts&&y(r.contactedExperts)}});return()=>e()},[x,c,s,d.id,o,p,t,w]);let S=e=>{if(e&&!t.includes(e)&&t.length<5){let r=[...t,e];s(r),(0,n.r7)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),{categories:r}),N("")}},U=async(e,t)=>{if(o[e]===t)return;let s={...o,[e]:t};await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),{experts:s}),c(s)},L=async e=>{if(!o[e]||!window.confirm("Are you sure you want to remove this expert?"))return;let t={...o};delete t[e];try{await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),{experts:t}),c(t)}catch(e){console.error("Error removing expert from Firebase:",e)}},I=async e=>{if("General"===e)return;let r=t.filter(t=>t!==e),l={...o};Object.keys(l).forEach(t=>{l[t]===e&&(l[t]="General")}),await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),{categories:r,experts:l}),s(r),c(l),w===e&&k(r[0]||"General")},O=e=>{let t=document.getElementById(e);t&&t.classList.toggle("hidden")},_=e=>{b(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},J=e=>{let t=e.split("\n\n").filter(e=>""!==e.trim());return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-600"}),(0,r.jsx)("div",{className:"ml-6 space-y-4",children:t.map((e,t)=>{let s=e.split("\n").map(e=>e.trim()).filter(e=>""!==e),l=s[0]||"",a=s[1]||"",n=s.slice(2).join(" ");return(0,r.jsxs)("div",{className:"pl-4",children:[(0,r.jsx)("h4",{className:"font-bold text-md",children:l}),(0,r.jsx)("p",{className:"text-gray-700 text-sm",children:a}),n&&(0,r.jsx)("p",{className:"text-gray-600 mt-1 text-sm",children:n})]},t)})})]})},G=async e=>{let t="added";switch(f[e]){case"added":t="no_contact";break;case"pending_response":t="pending_response";break;case"response_submitted":t="response_submitted";break;default:t="added"}if("pending_response"===t||"response_submitted"===t)return;let s={...f,[e]:t};y(s),await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),{contactedExperts:s})},F=async e=>{let t={...f};e.forEach(e=>{t[e]="pending_response"}),await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(d.id,"/userProjects/").concat(x)),{contactedExperts:t}),y(t),E(!1)};return(0,r.jsxs)("div",{className:"w-full h-full max-w-3xl space-y-6 z-10000000",children:[(0,r.jsxs)("button",{onClick:()=>{Object.keys(f).filter(e=>"added"===f[e]).length>0?E(!0):alert("No experts selected")},className:"flex mt-8 items-center space-x-2 py-1 px-3 rounded-md text-sm transition-colors duration-300 border-2 ".concat(Object.keys(f).filter(e=>"added"===f[e]).length>0?"border-black text-black hover:bg-black hover:text-white":"border-gray-300 text-gray-500 cursor-not-allowed"),disabled:0===Object.keys(f).filter(e=>"added"===f[e]).length,children:[(0,r.jsx)(u.G,{icon:h.FU$}),(0,r.jsxs)("span",{children:["Contact ",Object.keys(f).filter(e=>"added"===f[e]).length," Founder(s)"]})]}),(0,r.jsx)("div",{className:"flex justify-between items-center ",children:(0,r.jsxs)("div",{className:"flex space-x-4 overflow-x-auto max-h-16 ",children:[t.map(e=>(0,r.jsx)("div",{className:"relative flex items-center",children:(0,r.jsxs)("div",{onClick:()=>k(e),className:"py-2 px-4 rounded-full focus:outline-none transition-all duration-300 ".concat(w===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"," flex items-center"),children:[(0,r.jsx)("span",{className:"whitespace-nowrap",children:e}),"General"!==e&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm('Are you sure you want to delete the category "'.concat(e,'"?'))&&I(e)},className:"ml-2 text-grey-500 hover:text-grey-700",children:(0,r.jsx)(u.G,{icon:h.NBC})})]})},e)),t.length<5&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"===e.key&&v.trim()&&S(v)},placeholder:"Add category",maxLength:20,className:"py-2 px-4 rounded-full border focus:outline-none"}),(0,r.jsx)("button",{onClick:()=>S(v),className:"text-blue-500 hover:text-green-500 transition-colors",children:(0,r.jsx)(u.G,{icon:h.r8p})})]})]})}),(0,r.jsxs)("div",{className:"transition-all duration-500 transform",children:[Object.keys(o).filter(e=>o[e]===w).map(e=>{var s,l,a,n,i,c,d,x,m,g,b;return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-4 mb-4 flex flex-col items-start justify-between ".concat(j.has(e)?"bg-gray-50":""),children:[(0,r.jsxs)("div",{className:"w-full flex items-center cursor-pointer",onClick:()=>_(e),children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900",children:(null===(s=p[e])||void 0===s?void 0:s.name)||"Loading..."}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(null===(l=p[e])||void 0===l?void 0:l.title)||"Loading..."})]}),(0,r.jsx)(u.G,{icon:j.has(e)?h.mTx:h.ptq,className:"text-gray-500"})]}),j.has(e)&&(0,r.jsxs)("div",{className:"mt-4 text-gray-800 space-y-4 w-full",children:[(0,r.jsxs)("p",{className:"text-sm space-y-2",children:[(0,r.jsx)("strong",{children:"Summary:"})," ",null===(n=p[e])||void 0===n?void 0:null===(a=n.summary)||void 0===a?void 0:a.split("\n").map((e,t)=>(0,r.jsx)("span",{className:"block mt-2",children:e},t))]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Education:"})," ",null===(i=p[e])||void 0===i?void 0:i.education]}),(0,r.jsxs)("div",{className:"text-sm space-y-4",children:[(0,r.jsx)("strong",{children:"Experience:"}),J((null===(c=p[e])||void 0===c?void 0:c.experience)||"")]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Skills:"})," ",null===(x=p[e])||void 0===x?void 0:null===(d=x.skills)||void 0===d?void 0:d.join(", ")]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Years of Experience:"})," ",null===(m=p[e])||void 0===m?void 0:m.yearsOfExperience]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"LinkedIn:"})," ",(0,r.jsx)("a",{href:"https://".concat(null===(g=p[e])||void 0===g?void 0:g.linkedinUrl.replace(/^(https?:\/\/)?(www\.)?linkedin\.com\//,"www.linkedin.com/")),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",onClick:e=>e.stopPropagation(),children:null===(b=p[e])||void 0===b?void 0:b.linkedinUrl})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-4 w-full justify-between",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{className:"py-2 px-4 bg-transparent text-white rounded-full flex items-center justify-center relative border-2 border-transparent hover:border-gradient hover:text-transparent bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-none bg-clip-text hover:bg-gradient-to-r hover:from-purple-400 hover:via-pink-500 hover:to-red-500 transition-all duration-500",onClick:()=>O("dropdown-".concat(e)),children:(0,r.jsxs)("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 flex items-center",children:[(0,r.jsx)("span",{children:o[e]}),(0,r.jsx)(u.G,{icon:h.eW2,className:"ml-2 text-black"})]})}),(0,r.jsx)("div",{id:"dropdown-".concat(e),className:"absolute mt-2 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10 hidden",children:t.map(t=>(0,r.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{U(e,t),O("dropdown-".concat(e))},children:t},t))})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>G(e),className:"py-2 px-4 rounded-full text-white ".concat("added"===f[e]?"bg-black":"pending_response"===f[e]?"bg-orange-400 cursor-not-allowed":"response_submitted"===f[e]?"bg-green-500":"bg-gray-400"," ").concat("pending_response"===f[e]?"":"hover:bg-black"," transition-colors"),disabled:"pending_response"===f[e],children:"added"===f[e]?"Added":"pending_response"===f[e]?"Pending Response":"response_submitted"===f[e]?"Response Submitted":"Add to Contact List"}),(0,r.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to remove this expert?")&&L(e)},className:"py-2 px-4 bg-gray-200 text-gray-600 rounded-full flex items-center justify-center hover:bg-gray-300 hover:text-black transition-colors",children:(0,r.jsx)(u.G,{icon:h.$aW})})]})]})]},e)}),0===Object.keys(o).filter(e=>o[e]===w).length&&(0,r.jsx)("p",{className:"text-gray-500",children:"Expert List Empty"})]}),(0,r.jsx)("div",{children:C&&(0,r.jsx)(g,{projectId:x,onClose:()=>E(!1),onSend:F,selectedExperts:Object.keys(f).filter(e=>"added"===f[e])})})]})};let b=e=>e.split(" ").map(e=>e[0]).join(""),f=e=>e.replace(/[^a-zA-Z0-9 .,!?]/g,""),y=e=>e.toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/),v=(e,t)=>t.filter(t=>e.includes(t)).length/t.length*100;var N=()=>{var e;let t=(0,a.useParams)(),s=null==t?void 0:t.projectId,{user:g}=(0,o.a)(),[N,w]=(0,l.useState)(null),[k,C]=(0,l.useState)(!0),[E,P]=(0,l.useState)(!1),[S,U]=(0,l.useState)(!1),[L,I]=(0,l.useState)([]),[O,_]=(0,l.useState)(new Set),[J,G]=(0,l.useState)("search"),[F,T]=(0,l.useState)(["General"]),[z,A]=(0,l.useState)({}),B=(0,a.useRouter)();if((0,l.useEffect)(()=>{(async()=>{if(s&&g)try{let e=(0,n.JU)(i.db,"projects/".concat(g.id,"/userProjects/").concat(s)),t=await (0,n.QT)(e);if(t.exists()){let e=t.data();w(e),e.experts&&A(e.experts)}else console.error("No such document!")}catch(e){console.error("Error fetching project:",e)}finally{C(!1)}})()},[s,g]),!g)return;let D=e=>{let t=e.split("\n\n").filter(e=>""!==e.trim());return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-600"}),(0,r.jsx)("div",{className:"ml-6 space-y-4",children:t.map((e,t)=>{let s=e.split("\n").map(e=>e.trim()).filter(e=>""!==e),l=s[0]||"",a=s[1]||"",n=s.slice(2).join(" ");return(0,r.jsxs)("div",{className:"pl-4",children:[(0,r.jsx)("h4",{className:"font-bold text-md",children:l}),(0,r.jsx)("p",{className:"text-gray-700 text-sm",children:a}),n&&(0,r.jsx)("p",{className:"text-gray-600 mt-1 text-sm",children:n})]},t)})})]})},M=async e=>{C(!0);try{let t=(0,n.hJ)(i.db,"experts"),s=(await (0,n.PL)(t)).docs.map(e=>e.data()),r=y(e),l=s.map(e=>{let t=y(e.name),s=y(e.title),l=y(e.summary),a=y(e.skills.join(" ")),n=y(e.education),i=y(e.experience),o=.4*v(t,r),c=.3*v(s,r),d=.1*v(l,r),x=.1*v(a,r),u=.05*v(n,r),p=.05*v(i,r);return{...e,matchPercentage:Math.min(o+c+d+x+u+p,100)}}).sort((e,t)=>t.matchPercentage-e.matchPercentage);I(l)}catch(e){console.error("Error fetching experts:",e)}finally{C(!1)}},Q=e=>"rgb(".concat(Math.min(255,Math.round((1-e/100)*255)),", ").concat(Math.min(255,Math.round(e/100*255)),", 0)"),q=e=>{_(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},R=async(e,t)=>{let r={...N};if(z[e]){let t=z[e];if(t&&r.categories[t]){r.categories[t]=r.categories[t].filter(t=>t!==e),0===r.categories[t].length&&delete r.categories[t];let{[e]:l,...a}=z;await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(g.id,"/userProjects/").concat(s)),{categories:r.categories,experts:a}),w(r),A(a)}}else if(t){r.categories||(r.categories={}),r.categories[t]||(r.categories[t]=[]),r.categories[t].push(e);let l={...z,[e]:t};await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(g.id,"/userProjects/").concat(s)),{categories:r.categories,experts:l}),w(r),A(l)}},W=async e=>{if(!z[e]){console.error("Expert not found in added experts.");return}let{[e]:t,...r}=z;try{await (0,n.r7)((0,n.JU)(i.db,"projects/".concat(g.id,"/userProjects/").concat(s)),{experts:r}),A(r),console.log("Expert removed successfully")}catch(e){console.error("Error removing expert from Firebase:",e)}};return(0,r.jsxs)("div",{className:"flex min-h-screen",children:[(0,r.jsx)(c.Z,{collapsed:E,setCollapsed:P,startNewProject:()=>{},selectProject:()=>{}}),(0,r.jsxs)("div",{className:"flex-grow relative bg-white transition-all duration-300 flex flex-col",style:{paddingBottom:"72px"},children:[(0,r.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,r.jsx)("div",{className:"relative inline-block text-left",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("select",{value:J,onChange:e=>G(e.target.value),className:"appearance-none bg-white rounded-full py-2 px-8 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-300",children:[(0,r.jsx)("option",{value:"search",children:"Search"}),(0,r.jsx)("option",{value:"status",children:"Status"})]}),(0,r.jsx)(u.G,{icon:m.eW,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"})]})})}),(0,r.jsx)("div",{className:"absolute top-4 right-4 z-10",children:g&&(0,r.jsx)("div",{onClick:()=>B.push("/profile"),className:"w-10 h-10 flex items-center justify-center rounded-full border-2 border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white cursor-pointer transition-all",children:(0,r.jsx)("span",{className:"text-lg font-semibold",children:null===(e=g.email)||void 0===e?void 0:e.slice(0,2).toUpperCase()})})}),(0,r.jsx)("div",{className:"flex-grow flex flex-col items-center justify-center px-4 pt-8 pb-20",children:"search"===J?(0,r.jsx)(r.Fragment,{children:k?(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-700",children:"Loading..."})]}):L.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-4 mt-6 w-full max-w-3xl",children:L.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col items-start bg-white border border-gray-200 rounded-lg shadow-lg p-6 transition-transform duration-300 ".concat(O.has(t)?"bg-gray-50":""),onClick:e=>{e.target.closest(".action-icon, .category-popup")||q(t)},children:[(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("div",{className:"w-12 h-12 flex items-center justify-center rounded-full bg-blue-500 text-white text-xl font-semibold",children:b(e.name)}),(0,r.jsxs)("div",{className:"ml-4 flex-grow",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-base text-gray-700",children:e.title})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"font-semibold text-lg",style:{color:Q(e.matchPercentage)},children:[e.matchPercentage.toFixed(0),"%"]}),(0,r.jsx)("span",{className:"text-gray-600 text-sm ml-1",children:"match"})]}),(0,r.jsxs)("div",{className:"relative flex items-center space-x-2",children:[z[e.linkedinId]?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.G,{icon:h.f8k,className:"text-2xl text-green-500 cursor-pointer action-icon",onClick:t=>{var s;t.stopPropagation(),null===(s=document.getElementById("popup-".concat(e.linkedinId)))||void 0===s||s.classList.toggle("hidden")}}),(0,r.jsx)(u.G,{icon:h.$aW,className:"text-2xl text-gray-500 cursor-pointer action-icon hover:text-red-500 transition-colors duration-300",onClick:t=>{t.stopPropagation(),W(e.linkedinId)}})]}):(0,r.jsx)(u.G,{icon:h.FKd,className:"text-2xl text-blue-500 cursor-pointer action-icon hover:text-green-500 transition-colors duration-300",onClick:t=>{var s;t.stopPropagation(),null===(s=document.getElementById("popup-".concat(e.linkedinId)))||void 0===s||s.classList.toggle("hidden")}}),(0,r.jsx)("div",{id:"popup-".concat(e.linkedinId),className:"category-popup absolute right-0 mt-2 w-40 bg-white border border-gray-300 rounded-lg shadow-lg hidden z-20",children:F.map(t=>(0,r.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:s=>{var r;s.stopPropagation(),R(e.linkedinId,t),null===(r=document.getElementById("popup-".concat(e.linkedinId)))||void 0===r||r.classList.add("hidden")},children:t},t))})]})]})]}),O.has(t)&&(0,r.jsxs)("div",{className:"mt-6 text-gray-800 space-y-4",children:[(0,r.jsxs)("p",{className:"text-sm space-y-2",children:[(0,r.jsx)("strong",{children:"Summary:"})," ",f(e.summary).split("\n").map((e,t)=>(0,r.jsx)("span",{className:"block mt-2",children:e},t))]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Education:"})," ",e.education]}),(0,r.jsxs)("div",{className:"text-sm space-y-4",children:[(0,r.jsx)("strong",{children:"Experience:"}),D(e.experience)]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Skills:"})," ",e.skills.join(", ")]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"Years of Experience:"})," ",e.yearsOfExperience]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("strong",{children:"LinkedIn:"})," ",(0,r.jsx)("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",onClick:e=>e.stopPropagation(),children:"View Profile"})]})]})]},t))}):(0,r.jsxs)("div",{className:"w-full max-w-3xl space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold text-gray-800",children:["Project: ",N.title]}),(0,r.jsx)("button",{onClick:()=>U(!0),className:"text-gray-500 hover:text-gray-700",children:(0,r.jsx)(u.G,{icon:p.UJ})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-lg",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Role:"})," ",N.role]}),(0,r.jsxs)("p",{className:"text-lg",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Current Companies:"})," ",N.currentCompanies.join(", ")]}),(0,r.jsxs)("p",{className:"text-lg",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Previous Companies:"})," ",N.previousCompanies.join(", ")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Questions:"}),(0,r.jsx)("ul",{className:"list-disc list-inside space-y-2",children:N.questions.map((e,t)=>(0,r.jsx)("li",{className:"text-lg text-gray-700",children:e},t))})]})]})}):(0,r.jsx)(j,{categories:F,setCategories:T,addedExperts:z,setAddedExperts:A,user:g,projectId:s})}),"search"===J&&(0,r.jsx)(d,{collapsed:E,projectId:s,onSearch:M})]}),S&&N&&(0,r.jsx)(x,{onClose:()=>U(!1),title:"Edit Project Details",children:(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Project Title"}),(0,r.jsx)("input",{type:"text",value:N.title,onChange:e=>w({...N,title:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Role"}),(0,r.jsx)("input",{type:"text",value:N.role,onChange:e=>w({...N,role:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Current Companies"}),(0,r.jsx)("input",{type:"text",value:N.currentCompanies.join(", "),onChange:e=>w({...N,currentCompanies:e.target.value.split(", ")}),className:"w-full p-2 border border-gray-300 rounded-lg bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Previous Companies"}),(0,r.jsx)("input",{type:"text",value:N.previousCompanies.join(", "),onChange:e=>w({...N,previousCompanies:e.target.value.split(", ")}),className:"w-full p-2 border border-gray-300 rounded-lg bg-white"})]})]})})]})}},1504:function(e,t,s){"use strict";var r=s(7437),l=s(2265),a=s(6463),n=s(8826),i=s(9842),o=s(8634);t.Z=e=>{let{collapsed:t,setCollapsed:s,startNewProject:c,selectProject:d}=e,x=(0,a.useRouter)(),{user:u}=(0,n.a)(),[p,m]=(0,l.useState)([]),[h,g]=(0,l.useState)(null),j=(0,l.useRef)(null);(0,l.useEffect)(()=>{(async()=>{if(!u)return;let e=(0,i.hJ)(o.db,"projects",u.id,"userProjects"),t=(await (0,i.PL)(e)).docs.map(e=>{var t;let s=e.data();return{id:e.id,title:s.title||"Untitled Project",pinned:s.pinned||!1,lastOpened:(null===(t=s.lastOpened)||void 0===t?void 0:t.toDate())||new Date}});t.sort((e,t)=>e.pinned!==t.pinned?e.pinned?-1:1:t.lastOpened.getTime()-e.lastOpened.getTime()),m(t)})()},[u]),(0,l.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&g(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let b=e=>{d(e),x.push("/project/".concat(e)),f(e)},f=async e=>{if(!u)return;let t=(0,i.JU)(o.db,"projects",u.id,"userProjects",e);await (0,i.r7)(t,{lastOpened:new Date})},y=async(e,t)=>{if(!u)return;let s=(0,i.JU)(o.db,"projects",u.id,"userProjects",e);await (0,i.r7)(s,{pinned:!t}),m(s=>s.map(s=>s.id===e?{...s,pinned:!t}:s).sort((e,t)=>e.pinned!==t.pinned?e.pinned?-1:1:t.lastOpened.getTime()-e.lastOpened.getTime()))},v=async e=>{if(u&&window.confirm("Are you sure you want to delete this project?")){let t=(0,i.JU)(o.db,"projects",u.id,"userProjects",e);await (0,i.oe)(t),m(t=>t.filter(t=>t.id!==e))}},N=e=>{g(t=>t===e?null:e)};return(0,r.jsxs)("div",{className:"transition-all duration-300 h-screen flex flex-col ".concat(t?"w-20 bg-white":"w-60 bg-gray-50"," sticky top-0"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,r.jsx)("button",{onClick:()=>s(!t),className:"text-gray-600 hover:text-gray-800",children:t?">":"<"}),!t&&(0,r.jsx)("h1",{className:"text-md font-semibold text-gray-800",children:"Minerva"}),(0,r.jsx)("button",{onClick:()=>{x.push("/search")},className:"text-blue-600 hover:text-blue-800",children:"+"})]}),!t&&(0,r.jsx)("div",{className:"px-4 flex-grow",children:(0,r.jsx)("ul",{children:p.map(e=>{let{id:t,title:s,pinned:l}=e;return(0,r.jsxs)("li",{className:"mb-2 relative",children:[(0,r.jsxs)("button",{onClick:()=>b(t),className:"block w-full text-left px-2 py-2 rounded-lg hover:bg-gray-200 transition text-gray-800 flex items-center",children:[s,l&&(0,r.jsx)("span",{className:"ml-2 text-blue-500 text-sm"})]}),(0,r.jsx)("button",{className:"absolute right-2 top-2 text-gray-400 hover:text-gray-600 text-lg",onClick:()=>N(t),children:"⋮"}),h===t&&(0,r.jsxs)("div",{ref:j,className:"absolute right-2 top-8 w-32 bg-white border rounded-lg shadow-lg z-10",children:[(0,r.jsx)("button",{onClick:()=>y(t,l),className:"block w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-100",children:l?"Unpin":"Pin"}),(0,r.jsx)("button",{onClick:()=>v(t),className:"block w-full text-left px-4 py-2 text-red-600 hover:bg-red-100",children:"Delete"}),(0,r.jsx)("button",{onClick:()=>g(null),className:"block w-full text-left px-4 py-2 text-gray-400 hover:bg-gray-100",children:"Cancel"})]})]},t)})})})]})}}},function(e){e.O(0,[358,691,676,72,263,971,23,744],function(){return e(e.s=3989)}),_N_E=e.O()}]);