(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9753:function(e,t,r){Promise.resolve().then(r.t.bind(r,3054,23)),Promise.resolve().then(r.bind(r,8826))},8826:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return l},a:function(){return u}});var s=r(7437),i=r(2265),n=r(5186),a=r(9842);class c{addProject(e,t){this.projects.set(e,t)}useCredit(){if(this.credits>0)this.credits-=1;else throw Error("Not enough credits")}addCredit(e){this.credits+=e}constructor(e,t,r,s=new Map,i=0){this.id=e,this.name=t,this.email=r,this.projects=s||new Map,this.credits=i}}var d=r(8634);let o=(0,i.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,i.useState)(null),[u,p]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let e=(0,n.v0)(),t=(0,n.Aj)(e,async e=>{if(e){let t=e.uid,r=e.email||"",s=(0,a.JU)(d.db,"users",t),i=await (0,a.QT)(s);if(i.exists()){let e=i.data();l(new c(t,e.name,r,new Map(e.projects),e.credits))}else{let e=new c(t,"",r);await (0,a.pl)(s,{name:e.name,email:e.email,projects:{},credits:e.credits}),l(e)}}else l(null);p(!1)});return()=>t()},[]),u)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-white",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-blue-500"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-700",children:"Loading user data..."})]})}):(0,s.jsx)(o.Provider,{value:{user:r,setUser:l},children:t})},u=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useUser must be used within a UserProvider");return e}},8634:function(e,t,r){"use strict";r.d(t,{I:function(){return d},db:function(){return c}});var s=r(5236),i=r(9842),n=r(5186);let a=(0,s.ZF)({apiKey:"AIzaSyA14LUJlrrF9qjTs_sdSKWoxcr4Nbmo4Yk",authDomain:"expert-link-pro.firebaseapp.com",projectId:"expert-link-pro",storageBucket:"expert-link-pro.appspot.com",messagingSenderId:"936590460150",appId:"1:936590460150:web:b376036b84b0a689db18d7",measurementId:"G-YL2DDQBBTG"}),c=(0,i.ad)(a),d=(0,n.v0)(a)},3054:function(){}},function(e){e.O(0,[725,358,691,72,971,23,744],function(){return e(e.s=9753)}),_N_E=e.O()}]);